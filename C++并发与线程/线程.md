## pthrad_create()函数

创建线程，并设定线程的入口函数。

pthread_self()函数返回当前线程标识符，也就是线程ID。

```cpp
#include <stdio.h>                                                                                                                              
#include <stdlib.h>
#include <unistd.h>
#include <stdlib.h>
#include <pthread.h>

int thread(void* ptr)
{
    pthread_t newthid;

    newthid=pthread_self();
    printf("这是新的线程 ID = %u\n",(unsigned int)newthid);
    return ;
}

int main(void)
{
    pthread_t thid;

    printf("主线程的ID is %u\n",(unsigned int)pthread_self());              //打印主线程ID;
    if(pthread_create(&thid, NULL, (void *)thread, NULL) !=0 )
    {
            printf("线程创建失败!\n");
            exit(1);
    }
    sleep(1);
    exit(0);
}
```

## pthread_join()函数

join()线程阻塞，等待被创建线程的结束，并回收它的资源。

# 线程间通信
## 信号量：一次只允许一个线程访问临界资源。

信号量是一种外部资源的标识，不具有数据交换功能，通过控制其他资源实现线程间通信。

线程对其操作都是原子的。并且只允许对他进行等待。

信号量只有两种操作：P和V
0. sv代表信号量的值，通常只取0和1(二进制信号量)
1. P(sv)：如果sv > 0，怎sv--，线程访问其管理的临界资源；如果sv = 0，线程挂起。
2. V(sv)：如果其他进程因等待sv而挂起，让线程恢复运行，否则sv++。

头文件：#include<sys/sem.h>

int semget()：创建一个信号量；或取得一个新信号量。
> 返回一个信号量标识符，其余函数通过信号量标识符操作信号量

int semop()：改变信号量的值。

int semctl()：控制信号量信息。

信号量使用完要删除，否则会一直存在